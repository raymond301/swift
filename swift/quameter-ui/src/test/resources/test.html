<!DOCTYPE html>
<html lang="en">
<head>
<title>QuaMeter Data | Atlas 4.0 Dev
</title>
<base href="http://atlas:8090/quameter"/>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="/common/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
<style type="text/css">
        /* http://stackoverflow.com/questions/3790935/can-i-hide-the-html5-number-inputs-spin-box */
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        /* display: none; <- Crashes Chrome on hover */
        -webkit-appearance: none;
        margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
    }

    body {
        margin-top: 90px;
    }

    .graph {
        width: 100%;
        height: 320px;
        margin-bottom: 10px;
    }

    h4 {
        text-align: center;
    }

    .legend dt {
        float: left;
        margin-right: 0.5em;
    }

    .dygraph-legend {
        background-color: rgba(255, 255, 255, 0.7) !important;
    }

    .dygraph-legend > span.highlight {
        background-color: #f9f500;
    }

    .dygraph-legend > span > b {
        white-space: nowrap;
    }

    button.highlight {
        color: #bff;
    }

    .btn-toolbar {
        margin-top: 0;
        margin-bottom: 0;
    }

    #selected-path {
        margin: 0 5px 0 5px;
        color: #888;
        height: 25px;
        min-height: 25px;
        font-family: Monaco, Menlo, Consolas, "Courier New", monospace;
        font-size: 13px;
        text-overflow: ellipsis;
        white-space: nowrap;
        overflow: hidden;
    }

    #selected-path span {
        color: #bff;
    }

    .navbar a.brand {
        margin-left: -15px;
    }

</style>
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="/common/bootstrap/js/html5shiv.js"></script>
<![endif]-->

<script type="text/javascript" src="/common/bootstrap/js/jquery_1.9.0.min.js"></script>
<script type="text/javascript" src="/common/bootstrap/js/bootstrap.js"></script>


<script type="text/javascript" src="/quameter/dygraph-combined.js"></script>

<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

// Load the Visualization API and the core package.
google.load('visualization', '1.0', {'packages': ['corechart']});

// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawChart);

function columnIndex(id, data) {
    for (var i = 0; i < data.getNumberOfColumns(); i++) {
        if (data.getColumnId(i) == id) {
            return i;
        }
    }
    alert("Column " + id + " does not exist");
}

// Add buttons to given div, one for each unique value from a given column
// div should be jQuery-enriched element
function addButtons(div, data, columnId) {
    var column = columnIndex(columnId, data);

    var names = {};
    for (var row = 0; row < data.getNumberOfRows(); row++) {
        var value = data.getValue(row, column);
        if (names[value]) {
            names[value]++;
        } else {
            names[value] = 1;
        }
    }
    var keys = $.map(names,function (element, index) {
        return index
    }).sort();

    $.each(keys, function (index, value) {
        div.append('<button type="button" class="btn btn-primary" value="' + value + '">' + value + ' (' + names[value] + ')<' + '/button>');
    });
}

// Tokenize by underscore, wrap tokens in <span>
function spanAllUnderscoreTokens(s) {
    return s.split("_").map(function (item) {
        return '<span>' + item + '</span>'
    }).join('_');
}

// Callback that creates and populates a data table,
// instantiates the pie chart, passes in the data and
// draws it.
function drawChart() {
    // Create the data table.
    var data = new google.visualization.DataTable(
            {"cols": [
                {"id": "startTime", "label": "Start Time", "type": "datetime"},
                {"id": "path", "label": "Path", "type": "string"},
                {"id": "duration", "label": "Duration (min)", "type": "number"},
                {"id": "instrument", "label": "Instrument", "type": "string"},
                {"id": "category", "label": "Category", "type": "string"},
                {"id": "searchParameters", "label": "Search parameters ID", "type": "number"},
                {"id": "c_1a", "label": "C-1A", "type": "number"},
                {"id": "c_1b", "label": "C-1B", "type": "number"},
                {"id": "c_2a", "label": "C-2A", "type": "number"},
                {"id": "c_2b", "label": "C-2B", "type": "number"},
                {"id": "c_3a", "label": "C-3A", "type": "number"},
                {"id": "c_3b", "label": "C-3B", "type": "number"},
                {"id": "c_4a", "label": "C-4A", "type": "number"},
                {"id": "c_4b", "label": "C-4B", "type": "number"},
                {"id": "c_4c", "label": "C-4C", "type": "number"},
                {"id": "ds_1a", "label": "DS-1A", "type": "number"},
                {"id": "ds_1b", "label": "DS-1B", "type": "number"},
                {"id": "ds_2a", "label": "DS-2A", "type": "number"},
                {"id": "ds_2b", "label": "DS-2B", "type": "number"},
                {"id": "ds_3a", "label": "DS-3A", "type": "number"},
                {"id": "ds_3b", "label": "DS-3B", "type": "number"},
                {"id": "is_1a", "label": "IS-1A", "type": "number"},
                {"id": "is_1b", "label": "IS-1B", "type": "number"},
                {"id": "is_2", "label": "IS-2", "type": "number"},
                {"id": "is_3a", "label": "IS-3A", "type": "number"},
                {"id": "is_3b", "label": "IS-3B", "type": "number"},
                {"id": "is_3c", "label": "IS-3C", "type": "number"},
                {"id": "ms1_1", "label": "MS1-1", "type": "number"},
                {"id": "ms1_2a", "label": "MS1-2A", "type": "number"},
                {"id": "ms1_2b", "label": "MS1-2B", "type": "number"},
                {"id": "ms1_3a", "label": "MS1-3A", "type": "number"},
                {"id": "ms1_3b", "label": "MS1-3B", "type": "number"},
                {"id": "ms1_5a", "label": "MS1-5A", "type": "number"},
                {"id": "ms1_5b", "label": "MS1-5B", "type": "number"},
                {"id": "ms1_5c", "label": "MS1-5C", "type": "number"},
                {"id": "ms1_5d", "label": "MS1-5D", "type": "number"},
                {"id": "ms2_1", "label": "MS2-1", "type": "number"},
                {"id": "ms2_2", "label": "MS2-2", "type": "number"},
                {"id": "ms2_3", "label": "MS2-3", "type": "number"},
                {"id": "ms2_4a", "label": "MS2-4A", "type": "number"},
                {"id": "ms2_4b", "label": "MS2-4B", "type": "number"},
                {"id": "ms2_4c", "label": "MS2-4C", "type": "number"},
                {"id": "ms2_4d", "label": "MS2-4D", "type": "number"},
                {"id": "p_1", "label": "P-1", "type": "number"},
                {"id": "p_2a", "label": "P-2A", "type": "number"},
                {"id": "p_2b", "label": "P-2B", "type": "number"},
                {"id": "p_2c", "label": "P-2C", "type": "number"},
                {"id": "p_3", "label": "P-3", "type": "number"}
            ], "rows": [
                {"c": [
                    {"v": "Date(2014, 2, 1, 3, 30, 53, 0)"},
                    {"v": "/mnt/atlas/ResearchandDevelopment/QE_Method Development/Isolation_Width_20140130/PooledSAA2_QE_20140131_0ptimized_Isolation1mz_Inj1_LAMBDA.raw"},
                    {"v": 48.001666666666665},
                    {"v": "Exactive Series slot #1"},
                    {"v": "AL-Lambda"},
                    {"v": 0},
                    {"v": 0.00328947},
                    {"v": 0.256579},
                    {"v": 14.1452},
                    {"v": 10.4629},
                    {"v": 9.82982},
                    {"v": 7.20417},
                    {"v": 6.09399},
                    {"v": 4.66028},
                    {"v": 9.06706},
                    {"v": 7.34375},
                    {"v": 2.13333},
                    {"v": 1507.0},
                    {"v": 3528.0},
                    {"v": 3.94588},
                    {"v": 3.9869},
                    {"v": 0.0},
                    {"v": 0.0},
                    {"v": 652.273},
                    {"v": 0.0},
                    {"v": 0.169884},
                    {"v": 0.00772201},
                    {"v": 1.82552},
                    {"v": 331.001},
                    {"v": 346006.0},
                    {"v": 143.919},
                    {"v": 767631.0},
                    {"v": 4.67857E-4},
                    {"v": 0.00272669},
                    {"v": 0.893949},
                    {"v": 3.86436},
                    {"v": 100.0},
                    {"v": 25.3141},
                    {"v": 82.5},
                    {"v": 0.00743349},
                    {"v": 0.0183953},
                    {"v": 0.0391389},
                    {"v": 0.172144},
                    {"v": 59.1093},
                    {"v": 609.0},
                    {"v": 306.0},
                    {"v": 274.0},
                    {"v": 0.0}
                ]},
                {"c": [
                    {"v": "Date(2014, 2, 3, 15, 53, 33, 0)"},
                    {"v": "/mnt/atlas/ResearchandDevelopment/QE_Method Development/Isolation_Width_20140130/PooledSAA2_QE_20140131_0ptimized_Isolation2mz_Inj2_KAPPA.raw"},
                    {"v": 47.003166666666665},
                    {"v": "Q Exactive Plus 3093"},
                    {"v": "AL-Kappa"},
                    {"v": 0},
                    {"v": 0.0037037},
                    {"v": 0.248148},
                    {"v": 15.6734},
                    {"v": 9.25134},
                    {"v": 9.13021},
                    {"v": 7.32031},
                    {"v": 5.22839},
                    {"v": 3.54983},
                    {"v": 7.98197},
                    {"v": 5.60976},
                    {"v": 3.15385},
                    {"v": 1802.0},
                    {"v": 3585.0},
                    {"v": 4.39155},
                    {"v": 4.39155},
                    {"v": 0.0},
                    {"v": 0.0},
                    {"v": 658.333},
                    {"v": 0.0},
                    {"v": 0.136364},
                    {"v": 0.0113636},
                    {"v": 1.95629},
                    {"v": 317.046},
                    {"v": 327945.0},
                    {"v": 118.46},
                    {"v": 696279.0},
                    {"v": 4.7534E-4},
                    {"v": 0.00325861},
                    {"v": 0.881122},
                    {"v": 4.41302},
                    {"v": 100.0},
                    {"v": 27.7741},
                    {"v": 122.0},
                    {"v": 0.0105391},
                    {"v": 0.0210782},
                    {"v": 0.0433901},
                    {"v": 0.157276},
                    {"v": 59.0523},
                    {"v": 573.0},
                    {"v": 304.0},
                    {"v": 269.0},
                    {"v": 0.0}
                ]},
                {"c": [
                    {"v": "Date(2014, 2, 3, 20, 38, 43, 0)"},
                    {"v": "/mnt/atlas/ResearchandDevelopment/QE_Method Development/Isolation_Width_20140130/PooledSAA2_QE_20140131_0ptimized_Isolation4mz_Inj4_ATTR.raw"},
                    {"v": 46.99883333333333},
                    {"v": "Q Exactive Plus 3093"},
                    {"v": "ATTR"},
                    {"v": 0},
                    {"v": 0.0809717},
                    {"v": 0.129555},
                    {"v": 15.777},
                    {"v": 8.17644},
                    {"v": 6.78375},
                    {"v": 6.98179},
                    {"v": 4.7188},
                    {"v": 4.19743},
                    {"v": 9.84565},
                    {"v": 5.10256},
                    {"v": 3.9},
                    {"v": 1726.0},
                    {"v": 3892.0},
                    {"v": 3.72916},
                    {"v": 3.7264},
                    {"v": 0.0},
                    {"v": 0.0},
                    {"v": 690.59},
                    {"v": 0.0},
                    {"v": 0.146552},
                    {"v": 0.0172414},
                    {"v": 1.95991},
                    {"v": 398.892},
                    {"v": 365481.0},
                    {"v": 116.404},
                    {"v": 681585.0},
                    {"v": 4.79333E-4},
                    {"v": 0.00333908},
                    {"v": 0.935293},
                    {"v": 4.62571},
                    {"v": 100.0},
                    {"v": 31.2064},
                    {"v": 178.0},
                    {"v": 0.0096231},
                    {"v": 0.021251},
                    {"v": 0.0369033},
                    {"v": 0.138733},
                    {"v": 58.5953},
                    {"v": 516.0},
                    {"v": 270.0},
                    {"v": 239.0},
                    {"v": 0.0}
                ]},
                {"c": [
                    {"v": "Date(2014, 2, 3, 13, 30, 59, 0)"},
                    {"v": "/mnt/atlas/ResearchandDevelopment/QE_Method Development/Isolation_Width_20140130/PooledSAA2_QE_20140131_0ptimized_Isolation1mz_Inj1_140203133059_ATTR.raw"},
                    {"v": 48.00016666666667},
                    {"v": "Q Exactive Plus 3093"},
                    {"v": "ATTR"},
                    {"v": 0},
                    {"v": 0.0},
                    {"v": 0.195455},
                    {"v": 14.7587},
                    {"v": 8.80838},
                    {"v": 8.30613},
                    {"v": 5.67103},
                    {"v": 7.04445},
                    {"v": 3.51001},
                    {"v": 7.64836},
                    {"v": 6.93333},
                    {"v": 2.30769},
                    {"v": 1819.0},
                    {"v": 3088.0},
                    {"v": 4.16374},
                    {"v": 4.42272},
                    {"v": 0.0},
                    {"v": 0.0},
                    {"v": 624.266},
                    {"v": 0.0},
                    {"v": 0.150862},
                    {"v": 0.012931},
                    {"v": 1.83434},
                    {"v": 296.342},
                    {"v": 322358.0},
                    {"v": 108.586},
                    {"v": 722983.0},
                    {"v": 5.22063E-4},
                    {"v": 0.00304643},
                    {"v": 1.05854},
                    {"v": 4.25346},
                    {"v": 100.0},
                    {"v": 22.9001},
                    {"v": 71.0},
                    {"v": 0.00945946},
                    {"v": 0.0202794},
                    {"v": 0.0414601},
                    {"v": 0.149166},
                    {"v": 56.9764},
                    {"v": 490.0},
                    {"v": 271.0},
                    {"v": 243.0},
                    {"v": 0.0}
                ]},
                {"c": [
                    {"v": "Date(2014, 2, 3, 18, 16, 6, 0)"},
                    {"v": "/mnt/atlas/ResearchandDevelopment/QE_Method Development/Isolation_Width_20140130/PooledSAA2_QE_20140131_0ptimized_Isolation3mz_Inj3_ATTR.raw"},
                    {"v": 46.99883333333333},
                    {"v": "Q Exactive Plus 3093"},
                    {"v": "ATTR"},
                    {"v": 0},
                    {"v": 0.0757576},
                    {"v": 0.155303},
                    {"v": 15.899},
                    {"v": 8.80557},
                    {"v": 8.35409},
                    {"v": 5.94287},
                    {"v": 5.68603},
                    {"v": 3.85576},
                    {"v": 8.19505},
                    {"v": 5.525},
                    {"v": 3.33333},
                    {"v": 1745.0},
                    {"v": 3872.0},
                    {"v": 4.14244},
                    {"v": 4.49232},
                    {"v": 0.0},
                    {"v": 0.0},
                    {"v": 662.306},
                    {"v": 0.0},
                    {"v": 0.12749},
                    {"v": 0.0438247},
                    {"v": 2.00212},
                    {"v": 366.335},
                    {"v": 326541.0},
                    {"v": 121.771},
                    {"v": 698489.0},
                    {"v": 4.28064E-4},
                    {"v": 0.00315984},
                    {"v": 0.781908},
                    {"v": 4.84807},
                    {"v": 100.0},
                    {"v": 29.7584},
                    {"v": 150.0},
                    {"v": 0.014},
                    {"v": 0.0192},
                    {"v": 0.0412},
                    {"v": 0.1484},
                    {"v": 58.7075},
                    {"v": 558.0},
                    {"v": 295.0},
                    {"v": 263.0},
                    {"v": 0.0}
                ]}
            ]}
            , 0.6);

    var viewMetadata = {};
    var allRows = Array(data.getNumberOfRows());
    for (var i = 0; i < data.getNumberOfRows(); i++) {
        allRows[i] = i;
    }
    viewMetadata.filteredRows = allRows;

    var views = [
        { "view": "tails",
            "columns": ["c_1a", "c_1b"]
        },
        { "view": "elution",
            "columns": ["c_2a", "duration"]
        },
        { "view": "idRate",
            "columns": ["c_2b"]
        },
        { "view": "peakBroadening",
            "columns": ["c_3a", "c_3b", "c_4a", "c_4b", "c_4c"]
        },
        { "view": "oversampling",
            "columns": ["ds_1a", "ds_1b"]
        },
        { "view": "samplingRate",
            "columns": ["ds_2a", "ds_2b"]
        },
        { "view": "peakSampling",
            "columns": ["ds_3a", "ds_3b"]
        },
        { "view": "electrospray",
            "columns": ["is_1a", "is_1b"]
        },
        { "view": "tuning",
            "columns": ["is_2"]
        },
        { "view": "chargeState",
            "columns": ["is_3a", "is_3b", "is_3c"]
        },
        { "view": "ms1Time",
            "columns": ["ms1_1"]
        },
        { "view": "ms1SigToNoise",
            "columns": ["ms1_2a", "ms1_3a"]
        },
        { "view": "ms1Tic",
            "columns": ["ms1_2b"]
        },
        { "view": "ms1PrecError",
            "columns": ["ms1_5a", "ms1_5b"]
        },
        { "view": "ms1PrecErrorPpm",
            "columns": ["ms1_5c", "ms1_5d"]
        },
        { "view": "ms2Time",
            "columns": ["ms2_1"]
        },
        { "view": "ms2SigToNoise",
            "columns": ["ms2_2"]
        },
        { "view": "ms2NumPeaks",
            "columns": ["ms2_3"]
        },
        { "view": "ms2IdRatio",
            "columns": ["ms2_4a", "ms2_4b", "ms2_4c", "ms2_4d"]
        },
        { "view": "searchScore",
            "columns": ["p_1"]
        },
        { "view": "trypticMs2",
            "columns": ["p_2a"]
        },
        { "view": "trypticPeptides",
            "columns": ["p_2b"]
        },
        { "view": "distinctPeptides",
            "columns": ["p_2c"]
        },
        { "view": "semiToTryptic",
            "columns": ["p_3"]
        }
    ];

    var blockRedraw = false;
    gs = [];

    function col(id) {
        return columnIndex(id, data);
    }

    var selectedPath = $('#selected-path');
    var pathColumnIndex = col('path');

    // Make buttons
    var categoryDiv = $('#category-buttons');
    addButtons(categoryDiv, data, 'category');

    var instrumentDiv = $('#instrument-buttons');
    addButtons(instrumentDiv, data, 'instrument');

    var categoryButtons = categoryDiv.find('.btn');
    var categoryColumnIndex = col('category');
    var instrumentButtons = instrumentDiv.find('.btn');
    var instrumentColumnIndex = col('instrument');

    for (var i = 0; i < views.length; i++) {
        var v = views[i];
        var view = new google.visualization.DataView(data);
        var cols = [];
        cols.push(col("startTime"));
        for (var j = 0; j < v.columns.length; j++) {
            cols.push(col(v.columns[j]))
        }
        view.setColumns(cols);
        views[i].dataView = view;
        views[i].dygraph = new Dygraph(
                document.getElementById(v.view),
                views[i].dataView,
                {
                    drawCallback: function (me, initial) {
                        if (blockRedraw || initial) return;
                        blockRedraw = true;
                        var range = me.xAxisRange();
                        for (var j = 0; j < views.length; j++) {
                            if (gs[j] == me) continue;
                            gs[j].updateOptions({
                                dateWindow: range
                            });
                        }
                        blockRedraw = false;
                    },
                    drawPoints: true,
                    pointSize: 2,
                    strokeWidth: 0.4,
                    highlightSeriesOpts: {
                        strokeWidth: 2,
                        strokeBorderWidth: 1,
                        highlightCircleSize: 4
                    },
                    highlightCallback: function (event, x, points, viewRow, seriesName) {
                        var row = viewMetadata['filteredRows'][viewRow];
                        var path = data.getValue(row, pathColumnIndex);

                        var pathChunks = /(.*\/)([^\/\\]+)(\.[^.]+)/.exec(path);
                        var pathHtml = pathChunks[1] + spanAllUnderscoreTokens(pathChunks[2]) + pathChunks[3];

                        selectedPath.html(pathHtml);
                        instrumentButtons.removeClass("highlight");
                        categoryButtons.removeClass("highlight");

                        var instrument = data.getValue(row, instrumentColumnIndex);
                        instrumentButtons.filter("[value='" + instrument + "']").addClass("highlight");

                        var category = data.getValue(row, categoryColumnIndex);
                        categoryButtons.filter("[value='" + category + "']").addClass("highlight");
                    },
                    unhighlightCallback: function (event) {
                        selectedPath.text("");
                        instrumentButtons.removeClass("highlight");
                        categoryButtons.removeClass("highlight");
                    }
                }
        );
        gs.push(views[i].dygraph);

    }

    $('.btn').button();
    $.merge(categoryButtons, instrumentButtons).click(function (event) {
        var current = $(this);

        if (!event.shiftKey) {
            current.siblings().removeClass("btn-primary");
            current.removeClass("btn-primary");
        }

        current.toggleClass("btn-primary");

        var selectedCategory = [];
        categoryButtons.each(function () {
            if ($(this).hasClass('btn-primary')) {
                selectedCategory.push($(this).attr("value"));
            }
        });

        var selectedInstrument = [];
        instrumentButtons.each(function () {
            if ($(this).hasClass('btn-primary')) {
                selectedInstrument.push($(this).attr("value"));
            }
        });

        var filteredRows = [];
        for (var row = 0; row < data.getNumberOfRows(); row++) {
            var category = data.getValue(row, categoryColumnIndex);
            var instrument = data.getValue(row, instrumentColumnIndex);
            if (0 <= $.inArray(category, selectedCategory) && 0 <= $.inArray(instrument, selectedInstrument)) {
                filteredRows.push(row);
            }
        }

        viewMetadata['filteredRows'] = filteredRows;
        for (var i = 0; i < views.length; i++) {
            views[i].dataView.setRows(filteredRows);
            views[i].dygraph.updateOptions({file: views[i].dataView});
        }

    });
}
</script>

</head>
<body>
<div class="container-fluid">
<div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
        <a href="#" class="brand">QuaMeter Results</a>

        <div class="btn-toolbar pull-left span5">
            <div class="btn-group" id="category-buttons">
            </div>
        </div>

        <div class="btn-toolbar pull-left span5 ">
            <div class="btn-group" id="instrument-buttons">
            </div>

        </div>

        <div class="row-fluid">
            <div id="selected-path" class="span12"></div>
        </div>
    </div>
</div>

<h3>Chromatography</h3>

<div class="row-fluid">
    <div class="span3">
        <h4>Peak Tails</h4>

        <div id="tails" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>C-1A <span>Bleed Ratio</span></dt>
                <dd>Fraction of peptides with repeat identifications >4 min earlier than identification closest to
                    the chromatographic maximum
                </dd>
                <dt>C-1B <span>Peak Tailing Ratio</span></dt>
                <dd>Fraction of peptides with repeat identifications >4 min later than identification closest to the
                    chromatographic maximum
                </dd>
            </dl>
        </div>
    </div>
    <div class="span3">
        <h4>Elution</h4>

        <div id="elution" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>C-2A</dt>
                <dd>Retention time period over which the middle 50% of the identified peptides eluted (minutes)
                </dd>
                <dt>Duration</dt>
                <dd>Acquisition duration (minutes)
                </dd>

            </dl>
        </div>
    </div>

    <div class="span3">
        <h4>ID Rate</h4>

        <div id="idRate" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>C-2B</dt>
                <dd>Rate of peptide identification during the C-2A time range
                </dd>
            </dl>
        </div>
    </div>

    <div class="span3">
        <h4>Peak Broadening</h4>

        <div id="peakBroadening" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>C-3A</dt>
                <dd>Median identified peak width
                </dd>
                <dt>C-3B</dt>
                <dd>Interquantile range for peak widths
                </dd>

                <dt>C-4A</dt>
                <dd>Median peak width over <i>last 10%</i> of the elution time
                </dd>
                <dt>C-4B</dt>
                <dd>Median peak width over <i>first 10%</i> of the elution time
                </dd>
                <dt>C-4C</dt>
                <dd>Median peak width over <i>middle 10%</i> of the elution time
                </dd>
            </dl>
        </div>
    </div>


</div>

<h3>Dynamic Sampling</h3>

<div class="row-fluid">
    <div class="span4">
        <h4>Oversampling</h4>

        <div id="oversampling" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>DS-1A</dt>
                <dd>Ratio of singly to doubly identified peptide ions.
                </dd>
                <dt>DS-1B</dt>
                <dd>Ratio of doubly to triply identified peptide ions.
                </dd>
            </dl>
        </div>
    </div>

    <div class="span4">
        <h4>Sampling Rate</h4>

        <div id="samplingRate" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>DS-2A</dt>
                <dd>Number of MS1 scans acquired during the C-2A time range
                </dd>
                <dt>DS-2B</dt>
                <dd>Number of MS2 scans acquired during the C-2A time range
                </dd>
            </dl>
        </div>
    </div>

    <div class="span4">
        <h4>Peak Sampling</h4>

        <div id="peakSampling" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>DS-3A</dt>
                <dd>Median ratio of the maximum MS1 peak intensity over the MS1 intensity at the sampling time for all
                    identified peptides.
                    We want to capture peak at its apex.
                </dd>
                <dt>DS-3B</dt>
                <dd>Median ratio of the maximum MS1 peak intensity over the MS1 intensity at the sampling time for
                    peptides with peak intensity in bottom 50%.
                    We want to capture peak at its apex even for low-intensity peptides.
                </dd>
            </dl>
        </div>
    </div>
</div>

<h3>Ion Source</h3>

<div class="row-fluid">
    <div class="span4">
        <h4>Electrospray Instability</h4>

        <div id="electrospray" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>IS-1A</dt>
                <dd>TIC dropped more than 10x in two consecutive MS1 scans (within the C-2A time range)
                </dd>
                <dt>IS-1B</dt>
                <dd>TIC jumped more than 10x in two consecutive MS1 scans (within the C-2A time range)
                </dd>
            </dl>
        </div>
    </div>

    <div class="span4">
        <h4>Tuning</h4>

        <div id="tuning" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>IS-2</dt>
                <dd>Median precursor of identified peptide ions
                </dd>
            </dl>
        </div>
    </div>

    <div class="span4">
        <h4>Charge State</h4>

        <div id="chargeState" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>IS-3A</dt>
                <dd>Ratio of 1+/2+ identified peptides
                </dd>
                <dt>IS-3B</dt>
                <dd>Ratio of 3+/2+ identified peptides
                </dd>
                <dt>IS-3C</dt>
                <dd>Ratio of 4+/2+ identified peptides
                </dd>

            </dl>
        </div>
    </div>
</div>


<h3>MS1 Signal</h3>

<div class="row-fluid">
    <div class="span4">
        <h4>MS1 Time</h4>

        <div id="ms1Time" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>MS1-1</dt>
                <dd>Median injection time for MS1 spectra
                </dd>
            </dl>
        </div>
    </div>

    <div class="span4">
        <h4>MS1 Signal to Noise</h4>

        <div id="ms1SigToNoise" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>MS1-2A</dt>
                <dd>Ratio of maximum to median signal in MS1 spectra
                </dd>
                <dt>MS1-3A</dt>
                <dd>Dynamic range - ratio of 95th and 5th percentile of MS1 maximum identities for identified peptides
                    in C-2A time range
                </dd>
            </dl>
        </div>
    </div>

    <div class="span4">
        <h4>MS1 Total Ion Current</h4>

        <div id="ms1Tic" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>MS1-2B</dt>
                <dd>Median MS1 Total Ion Current
                </dd>
            </dl>
        </div>
    </div>
</div>

<div class="row-fluid">
    <div class="span4">
        <h4>MS1 Precursor Error</h4>

        <div id="ms1PrecError" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>MS1-5A</dt>
                <dd>Median difference between the theoretical precursor m/z and the measured precursor m/z value as
                    reported in the scan header
                </dd>
                <dt>MS1-5B</dt>
                <dd>Mean absolute difference between the theoretical precursor m/z and the measured precursor m/z value
                    as reported in the scan header
                </dd>
            </dl>
        </div>
    </div>

    <div class="span4">
        <h4>MS1 Precursor Error (PPM)</h4>

        <div id="ms1PrecErrorPpm" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>MS1-5C</dt>
                <dd>Median precursor mass error in PPM
                </dd>
                <dt>MS1-5D</dt>
                <dd>Interquartile range for mass error in PPM
                </dd>
            </dl>
        </div>
    </div>
</div>

<h3>MS2 Signal</h3>

<div class="row-fluid">
    <div class="span4">
        <h4>MS2 Time</h4>

        <div id="ms2Time" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>MS2-1</dt>
                <dd>Median injection time for MS2 spectra
                </dd>
            </dl>
        </div>
    </div>

    <div class="span4">
        <h4>MS2 Signal to Noise</h4>

        <div id="ms2SigToNoise" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>MS2-2</dt>
                <dd>Ratio of maximum to median signal in MS2 spectra
                </dd>
            </dl>
        </div>
    </div>

    <div class="span4">
        <h4>MS2 Number of Peaks</h4>

        <div id="ms2NumPeaks" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>MS2-3</dt>
                <dd>Median number of MS2 peaks
                </dd>
            </dl>
        </div>
    </div>
</div>

<div class="row-fluid">
    <div class="span4">
        <h4>MS2 ID Ratio</h4>

        <div id="ms2IdRatio" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>MS2-4(A-D)</dt>
                <dd>Fraction of MS2 scans identified in the 1st-4th quartile of peptides sorted by MS1 max intensity
                </dd>
            </dl>
        </div>
    </div>

    <div class="span4">
        <h4>Search Score</h4>

        <div id="searchScore" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>P-1</dt>
                <dd>Median peptide ID score
                </dd>
            </dl>
        </div>
    </div>
</div>

<h3>MS2 - Tryptic Peptides</h3>

<div class="row-fluid">
    <div class="span3">
        <h4>Tryptic MS2</h4>

        <div id="trypticMs2" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>P-2A</dt>
                <dd>Number of MS2 spectra identifying tryptic peptide ions
                </dd>
            </dl>
        </div>
    </div>
    <div class="span3">
        <h4>Tryptic Peptides</h4>

        <div id="trypticPeptides" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>P-2B</dt>
                <dd>Number of tryptic peptide ions identified
                </dd>
            </dl>
        </div>
    </div>
    <div class="span3">
        <h4>Distinct Peptides</h4>

        <div id="distinctPeptides" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>P-2C</dt>
                <dd>Number of distinct identified tryptic peptide sequences, ignoring modifications and charge state
                </dd>
            </dl>
        </div>
    </div>
    <div class="span3">
        <h4>Semitryptic Ratio</h4>

        <div id="semiToTryptic" class="graph"></div>
        <div class="legend">
            <dl>
                <dt>P-3</dt>
                <dd>Ratio of semitryptic/tryptic peptides
                </dd>
            </dl>
        </div>
    </div>
</div>


</div>

</body>
</html>